# Example: Using Sealed Secrets
# This is a TEMPLATE - actual sealed secrets will be generated using kubeseal

apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: shiksha-setu-secrets
  namespace: shiksha-setu
spec:
  encryptedData:
    # These are example encrypted values - replace with your actual sealed secrets
    # Generate using: kubeseal --format=yaml < secret.yaml > sealed-secret.yaml
    DATABASE_URL: AgA...  # Replace with actual sealed value
    JWT_SECRET_KEY: AgB...  # Replace with actual sealed value
    REDIS_URL: AgC...  # Replace with actual sealed value
    SECRET_KEY: AgD...  # Replace with actual sealed value
    OPENAI_API_KEY: AgE...  # Replace with actual sealed value
    SUPABASE_URL: AgF...  # Replace with actual sealed value
    SUPABASE_KEY: AgG...  # Replace with actual sealed value
  template:
    metadata:
      name: shiksha-setu-secrets
      namespace: shiksha-setu
    type: Opaque

---
# To generate actual sealed secrets, use:
# 
# 1. Create a plaintext secret file (DO NOT COMMIT):
# kubectl create secret generic shiksha-setu-secrets \
#   --from-literal=DATABASE_URL="postgresql://..." \
#   --from-literal=JWT_SECRET_KEY="..." \
#   --dry-run=client -o yaml > /tmp/secret.yaml
#
# 2. Seal the secret:
# kubeseal --format=yaml < /tmp/secret.yaml > k8s/base/sealed-secrets.yaml
#
# 3. Clean up plaintext:
# rm /tmp/secret.yaml
#
# 4. Commit sealed-secrets.yaml safely
