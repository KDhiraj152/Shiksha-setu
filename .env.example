# ShikshaSetu AI Education Platform - Environment Configuration
# Copy this file to .env and update with your settings
# For more information, see docs/setup.md

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
ENVIRONMENT=development
DEBUG=true
APP_NAME=ShikshaSetu AI Education API
APP_VERSION=2.0.0

# ============================================================================
# DEPLOYMENT TIER (local = M4 optimized, production = GPU cluster)
# ============================================================================
DEPLOYMENT_TIER=local

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
HOST=0.0.0.0
PORT=8000
UVICORN_RELOAD=true
UVICORN_WORKERS=1

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Option 1: Local PostgreSQL 17 (Development)
DATABASE_URL=postgresql://postgres:password@localhost:5432/shiksha_setu

# Option 2: Supabase (Production Recommended)
# Get from: https://app.supabase.com/project/_/settings/database
# DATABASE_URL=postgresql://postgres.YOUR_REF:YOUR_PASSWORD@aws-0-region.pooler.supabase.com:5432/postgres

# Database Connection Pool
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# PgBouncer (Production)
# PGBOUNCER_URL=postgresql://postgres:password@pgbouncer:6432/shiksha_setu

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# JWT Secret Key - MUST BE 64+ characters in production
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(64))'
JWT_SECRET_KEY=CHANGE_THIS_TO_SECURE_RANDOM_STRING_MINIMUM_64_CHARACTERS_REQUIRED

# Token Expiration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Policy
PASSWORD_MIN_LENGTH=12
BCRYPT_ROUNDS=12

# CORS Origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
REDIS_PASSWORD=

# ============================================================================
# CELERY & TASK QUEUE CONFIGURATION
# ============================================================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1
CELERY_TASK_ALWAYS_EAGER=false
CELERY_WORKER_CONCURRENCY=4

# ============================================================================
# AUTHENTICATION & SECURITY (CRITICAL - MUST SET IN PRODUCTION)
# ============================================================================
# JWT Configuration (generate: python -c "import secrets; print(secrets.token_urlsafe(64))")
JWT_SECRET_KEY=CHANGE_THIS_TO_A_STRONG_SECRET_MIN_64_CHARS_GENERATE_WITH_COMMAND_ABOVE
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Requirements
MIN_PASSWORD_LENGTH=8
REQUIRE_SPECIAL_CHARS=false
REQUIRE_NUMBERS=false
REQUIRE_UPPERCASE=false

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=false
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_STORAGE=redis
RATE_LIMIT_BURST_MULTIPLIER=1.5

# ============================================================================
# FILE UPLOAD CONFIGURATION
# ============================================================================
MAX_UPLOAD_SIZE=104857600
UPLOAD_DIR=data/uploads

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================
# S3 Object Storage (Production)
USE_S3_STORAGE=false
AWS_S3_BUCKET=
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ============================================================================
# ML/AI MODEL CONFIGURATION
# ============================================================================
# HuggingFace API Key (optional, for cloud inference)
HUGGINGFACE_API_KEY=

# Model Cache Directory
MODEL_CACHE_DIR=data/models
HF_HOME=data/models/huggingface

# Device Configuration (auto | cuda | mps | cpu)
DEVICE=auto
USE_QUANTIZATION=true
USE_FLASH_ATTENTION=false

# Model IDs
FLANT5_MODEL_ID=google/flan-t5-base
INDICTRANS2_MODEL_ID=ai4bharat/indictrans2-en-indic-1B
BERT_MODEL_ID=bert-base-multilingual-cased
EMBEDDING_MODEL_ID=BAAI/bge-small-en-v1.5

# vLLM Production Settings (GPU only)
VLLM_ENABLED=false
VLLM_TENSOR_PARALLEL_SIZE=1
VLLM_GPU_MEMORY_UTILIZATION=0.90

# Bhashini API Configuration (Recommended for local M4 development)
BHASHINI_API_KEY=
BHASHINI_API_URL=https://dhruva-api.bhashini.gov.in/services/inference/pipeline

# ============================================================================
# ERROR TRACKING & MONITORING
# ============================================================================
# Sentry DSN (Get from: https://sentry.io/settings/projects/YOUR_PROJECT/keys/)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Allowed origins (comma-separated for multiple)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================================================
# OBSERVABILITY & MONITORING
# ============================================================================
# OpenTelemetry
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=shiksha-setu-api

# Grafana Loki
LOKI_ENABLED=false
LOKI_URL=http://localhost:3100

# Prometheus
PROMETHEUS_ENABLED=true

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=text
LOG_DIR=logs

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Streaming Translation
STREAMING_ENABLED=true

# WebSocket Support
WEBSOCKET_MAX_CONNECTIONS=1000

# PWA Service Worker
PWA_ENABLED=true

# A/B Testing
AB_TESTING_ENABLED=false

# ============================================================================
# MULTI-TENANCY & BILLING
# ============================================================================
# Stripe Integration
STRIPE_ENABLED=false
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# ============================================================================
# CONTENT INTEGRATION
# ============================================================================
# NCERT Textbook Pre-indexing
NCERT_AUTO_INDEX=false

# Elasticsearch (for full-text search)
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_URL=http://localhost:9200

# ============================================================================
# LMS EXPORT
# ============================================================================
# SCORM/xAPI Support
SCORM_EXPORT_ENABLED=true
XAPI_ENDPOINT=

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_BASE_URL=ws://localhost:8000

# ============================================================================
# TESTING CONFIGURATION
# ============================================================================
TESTING=false
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/shiksha_setu_test
